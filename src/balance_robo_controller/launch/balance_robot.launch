<launch>
  <!-- 1. Load URDF -->
  <param name="robot_description"
         command="$(find xacro)/xacro $(find foc_urdf)/urdf/foc_urdf.urdf"/>

  <!-- 2. Start Gazebo -->
  <include file="$(find gazebo_ros)/launch/empty_world.launch">
    <arg name="use_sim_time" value="true"/>
  </include>

  <!-- 3. Spawn the robot with correct args order -->
  <node name="spawn_balance_robot"
        pkg="gazebo_ros" type="spawn_model"
        output="screen"
        args="
          -urdf
          -param robot_description
          -model balance_robot
          -x 0 -y 0 -z 0.1
        "/>

  <!-- 4. Load controllers & YAML in the same ns -->
  <group ns="balance_robot">
    <rosparam command="load"
              file="$(find balance_robot_controller)/config/controller.yaml"/>

    <node pkg="controller_manager" type="spawner"
          name="balance_spawner"
          args="joint_state_controller balance_robot_controller --timeout 60"
          output="screen"/>
  </group>

  <!-- 5. Teleâ€‘op -->
  <!-- <node pkg="teleop_twist_keyboard"
        type="teleop_twist_keyboard.py"
        name="teleop_keyboard"
        output="screen">
    <remap from="cmd_vel" to="/cmd_vel"/>
  </node> -->
</launch>
